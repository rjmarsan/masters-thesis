\chapter{Background \& Modivation}
\label{sec:background}

To understand the nature of modern mobile malware, we first examine the context. The two main models, that of iOS and Android, are compared and contrasted here.

\section{The ``App'' and Sandboxing}

In the mobile world, ``Apps'' are isolated and sandboxed programs, generally designed with one singular purpose. They lack dependencies, and generally are not as privileges as system software for performing many tasks. The mechanisms for accessing functionality outside of their sandbox is enforced by a set of policies the system holds, specific to that app. On some platforms, like iOS, only one app may run at any given time, and background computation is virtually non-existent (with some exceptions)\footnote{Minor amounts of computation can be done to compute background audio, and other isolated background tasks.}, along with many other restrictions. On Android and other platforms, many more features are available to apps, but in all cases, the ``app'' lifecycle is well defined and controlled by the system much more than on a PC OS.

There are various reasons for the tight sandboxing of mobile apps. Power and resource consumption are certainly a factor - mobile OSs generally reserve the right to kill apps if they attempt to allocate too much memory. Controlling access to hardware also helps in this: allowing apps to keep the phone awake could easily drain battery. However, another reason for sandboxing, and arguably more important, is protecting Personally Identifiable Information.

\subsection{Persionally Identifiable Information}

Personally Identifiable Information (PII), as defined by NIST, is ``any information about an individual maintained by an agency, including (1) any information that can be used to distinguish or trace an individual‘s identity... and (2) any other information that is linked or linkable to an individual'' \citep{mccallister2010guide}. Mobile devices, having replaced cameras, cell phones, GPS devices, and PCs, have an extremely diverse amount of PII, from phone numbers, to contacts, to location history, to bank account numbers and pictures. For many of these datasets, mobile OSs actually organize them into databases with the intention of allowing 3rd parties access to them. Contact lists, SMS, Photographs and location history are available to apps on virtually every mobile platform in some official way. This is a driving motivation for a greatly improved security model for mobile OSs: controlling 3rd party software’s access to PII. 

% Expand more on this.

\section{The ``App Stores'' and controlled distribution}

The final major difference between mobile OSs and PC OSs is the distribution of code. No mobile OS allows code to be ran outside of the sandbox, and all of them require the user to agree before installing an app. All apps must be signed, and in general, there is 1 main distribution channel for all apps on a mobile OS. This tightly controlled distribution both aids in security, as well as controls the ecosystem around that mobile OS.

The first major distribution platform for mobile apps was Apple’s App Store\citep{AppleAppStore}. It’s model has been repeated by almost all major mobile app distribution platforms. The basic premise is simple: developers sign up to the app store, pay a fee (usually yearly), and submit fully-finished apps. A reviewer runs the app in a monitored sandbox, watches for unusual behavior, checks for stability and clarity, and approves it. Once the app has been approved, it’s released onto the app store, at which time anyone can download it. The approval process, as well as the high monetary fee, act as a way to ensure only safe and high-quality apps are available for that platform. In these times of platforms, typically no apps may be installed from other sources. On iOS, initially this was the main method of security: if the app passed the inspection, it was acknowledged as safe and virtually unmonitored unless someone noticed something unusual and reported it. However, in recent years, after certain incidents, apps still must request permission from the user to perform certain tasks.

Android’s distribution platform takes a different approach, and at it’s core is also Android’s core security model: The Permission System. Android Apps declare when they are packaged what capabilities they will use, and the user reviews them at install time. If the user approves the app, it may use the requested capabilities whenever it wants: little restrictions are placed otherwise. With this barrier in mind, the Google Play Store (formally the Android Market), or GPStore, opts for an alternate model to iOS, where the developer pays a smaller fee, and apps go through no formal approval process. After an app’s submission, it’s immediately released into the wild for users to download and run. The assumption Android uses is that the metadata the GPStore provides: App name, Developer Name, Description, Reviews and Ratings, are enough for the user to determine if the app should be trusted with the permission set it’s given. In fact, Android even allows the device to accept apps from 3rd party sources, a practice known as ‘sideloading’, although it’s disabled by default. This has spawned a large number of 3rd party app sources, all of which rely on the Permission system for user protection.

This core concept behind Android security - Permissions as a static contract of capabilities, is the classic example of a rule-based security model. <expand on this>. However, in this paper we propose an alternate means of conceptualizing security, which focuses on the interrelationship between the user’s perception of the app, and the app’s actual behavior. We call this the ‘user-app agreement’, and will elaborate on it more shortly. 

The tighter security model of Mobile OSs has a notable effect on mobile malware. With tight control in sandboxing, and app distribution, the usual viruses, trojans, and other exploits are more difficult to employ. The main vectors are either OS-level exploits, sneaking past the app review process, or through sideloading of apps. When looking at the two main mobile OSs, a stark contrast is shown. Over <201 or so> known OS-level exploits exist for iOS, where only <5 or so> have been publicly released for Android. On the contrary, no side-loading is possible for iOS, and there have been very few instances of malware sneaking past Apple’s App Store review process, although it has happened <http://www.wired.com/gadgetlab/2012/07/first-ios-malware-found/>. Android’s malware situation is very much a product of the sideloading and lack of review process found in GPStore. Of all the mobile malware found for iOS and Android, over <some percent> used no system-exploits at all, <some percent> on the main app distribution platform.

Malware, as defined by the US-DHS, is “Short for malicious software. Programming (code, scripts, active content, and other software) designed to disrupt or deny operation, gather information that leads to loss of privacy or exploitation, gain unauthorized access to system resources, and other abusive behavior” <$http://ics-cert.us-cert.gov/pdf/undirected_attack0905.pdf$>. On mobile devices, the dominant goal of malware is to gather information that leads to loss of privacy, found in over <some large percent> of known mobile malware. 

This trend, of malware that possesses no system exploits, but gathers information that leads to loss of privacy, is one that Android’s Permission-based security model is ill-equipped to handle. Android’s permission system relies on the user to determine at install-time if a list of capabilities should be entrusted with the given app. The user is not given a say in how or when the capabilities may be used, nor the ability to reject specific capabilities. At the same time, the mechanisms that keep mobile OSs safe are forcing malware writers to use more subtle techniques, often times without exploits. This all works against the user.

In this paper, we attempt to address this key issue through various means. We first introduce several novel concepts for analyzing apps and malware on Android. We then analyze the state of Android apps with the most comprehensive android app database available. Finally, we propose several novel improvements to the Android security architecture, called <PROJECT>, aimed at building off of our conceptual work.

